# コンパクトウィンドウ機能 (Compact Window Feature)

Solo Desktopアプリケーションの新しいコンパクトウィンドウ機能についての説明です。

## 機能概要

コンパクトウィンドウ機能により、アプリを小さく表示して他の作業をしながら勤怠管理やTodo確認ができるようになります。

## 使用方法

### 1. コンパクトモードの開始
- 通常モードでヘッダーの右側にある「小さく表示」ボタンをクリック
- アプリが画面右下に320x500ピクセルのサイズで移動します

### 2. コンパクトモードでの機能
- **勤怠ビュー**：出勤、退勤、休憩開始、休憩終了ボタンが利用可能
- **Todoビュー**：未完了のTodoの表示と完了マークが可能
- **ビュー切替**：ヘッダーの「勤怠」「Todo」ボタンでビューを切り替え

### 3. 通常モードに戻る
- コンパクトモードのヘッダーにある「大きく表示」ボタンをクリック
- アプリが画面中央に1200x800ピクセルのサイズで表示されます

## 実装された変更点

### ヘッダーの変更
- **通常モード**：
  - 「Solo Desktop」→「Solo」に変更（クリックでホーム画面へ）
  - 「ユーザ一覧」「ホーム」メニューを削除
  - ユーザー名表示をアイコンのみに変更
  - リサイズボタンを追加

- **コンパクトモード**：
  - 高さ40pxの小さなヘッダー
  - 「勤怠」「Todo」の切り替えボタン
  - 「大きく表示」ボタン

### 新しいコンポーネント
- `CompactAttendance.vue`：コンパクトモード用勤怠管理画面
- `CompactTodo.vue`：コンパクトモード用Todo表示画面
- `layouts/compact.vue`：コンパクトモード専用レイアウト

### ウィンドウ管理
- 右下角への配置（20px余白）
- ウィンドウサイズ変更の自動検出
- ブラウザバック無効化（コンパクトモード時）

## 技術的詳細

### Tauriの機能使用
- `getCurrentWindow().setSize()`：ウィンドウサイズ変更
- `getCurrentWindow().setPosition()`：ウィンドウ位置変更
- `LogicalSize`・`LogicalPosition`：論理座標での制御

### Vue.js/Nuxtの機能
- `query.compact=true`：コンパクトモード判定
- 動的レイアウト切り替え
- リアクティブな状態管理

### レスポンシブ対応
- 320px幅でも使いやすいUI設計
- コンパクトモード専用のアイコンとボタンサイズ
- タッチターゲットサイズの最適化

## テスト方法

1. アプリを起動
2. ユーザーを選択してホーム画面へ
3. ヘッダーの「小さく表示」ボタンをクリック
4. 勤怠ボタンが正常に動作することを確認
5. 「Todo」タブに切り替えて未完了Todoが表示されることを確認
6. 「大きく表示」ボタンで通常モードに戻ることを確認

## 注意事項

- コンパクトモードではブラウザの戻るボタンが無効化されます
- ウィンドウを手動でリサイズすると自動的に通常モードに戻ります
- ユーザーがログインしていない状態では基本機能のみ利用可能です